CFLAGS += -DQEMU=1 -g -DKERN32BIT=1 -D__KERNEL__=1 -D__MTKERNEL__ -m32 -ffreestanding -static -Wall -I../../.. -I../../../usr/lib -I../../../usr/lib/c -g -m32 -O -fno-omit-frame-pointer -fno-stack-protector -fno-builtin

LDFLAGS += -nostdlib -nodefaultlibs -g -static -T kern.lds -m elf_i386

: foreach *.S *.c ../../*.c ../x86/*.c ../../mem/*.c ../../io/drv/pc/*.c ../../io/drv/pc/ps2/*.c |> gcc $(CFLAGS) -c %f -o %o |> %B.o

: *.o |> ld $(LDFLAGS) -o %o %f |> zero

